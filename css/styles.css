:root{--bg:#1a1a1a;--shadow:rgba(0,0,0,.35);--paper:#fff}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:#eee}
header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;gap:12px;position:sticky;top:0;background:rgba(26,26,26,.92);backdrop-filter:blur(6px);z-index:10;border-bottom:1px solid rgba(255,255,255,.06)}
header .left{display:flex;align-items:center;gap:10px}
header .title{font-weight:650;letter-spacing:.2px}
header .hint{opacity:.8;font-size:13px}
button{border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:#eee;padding:10px 12px;border-radius:12px;cursor:pointer;font-weight:600}
button:hover{background:rgba(255,255,255,.10)}
button:active{transform:translateY(1px)}
button:disabled{opacity:.45;cursor:not-allowed}
main{height:calc(100% - 58px);display:flex;align-items:center;justify-content:center;padding:18px}
#stage{width:min(1100px,96vw);aspect-ratio:16/10;position:relative;display:flex;align-items:center;justify-content:center}
#book{width:100%;height:100%;position:relative;perspective:2200px;display:flex;align-items:center;justify-content:center}
.spread{width:100%;height:100%;position:relative;display:grid;grid-template-columns:1fr 1fr;border-radius:18px;overflow:hidden;box-shadow:0 26px 80px rgba(0,0,0,.55);background:#111}
.page{position:relative;width:100%;height:100%;background:var(--paper);overflow:hidden}
.page img{width:100%;height:100%;object-fit:contain;display:block;background:#fff}
.gutter{position:absolute;left:50%;top:0;width:14px;height:100%;transform:translateX(-50%);background:linear-gradient(to right,rgba(0,0,0,.25),rgba(0,0,0,0),rgba(0,0,0,.25));pointer-events:none;mix-blend-mode:multiply;opacity:.45}
#flipLayer{position:absolute;inset:0;pointer-events:none;perspective:2200px}
.flipPage{position:absolute;top:0;width:50%;height:100%;transform-style:preserve-3d;will-change:transform}
.flipPage.right{left:50%;transform-origin:left center}
.flipPage.left{left:0;transform-origin:right center}
.flipFace{position:absolute;inset:0;backface-visibility:hidden;overflow:hidden}
.flipFace.front{box-shadow:-24px 0 40px var(--shadow)}
.flipFace.back{transform:rotateY(180deg);box-shadow:24px 0 40px var(--shadow)}
.flipFace img{width:100%;height:100%;object-fit:contain;background:#fff;display:block}
#progress{font-variant-numeric:tabular-nums;opacity:.9}
.toast{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.65);border:1px solid rgba(255,255,255,.12);padding:10px 12px;border-radius:12px;font-size:13px;opacity:0;pointer-events:none;transition:opacity .25s ease}
.toast.show{opacity:1}
